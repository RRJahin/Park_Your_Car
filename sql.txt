CREATE TABLE USERINFO (
    user_id int,
    Role varchar(255),
    UserPassword varchar(255),
    LastName varchar(255),
    FirstName varchar(255),
    Email varchar(255),
    NID varchar(255),
    Phone int,
    CONSTRAINT USER_PK PRIMARY KEY (user_id)
);


CREATE TABLE Employee (
    employee_id int,
    EmployeePassword varchar(255),
    LastName varchar(255),
    FirstName varchar(255),
    Email varchar(255),
    NID varchar(255),
    Phone int,
    Adress varchar(255),
    Designation varchar(255),
    CONSTRAINT Employee_PK PRIMARY KEY (employee_id)
);



CREATE TABLE RENT
(
  RENT_ID int,
  SPOT_ID int,
  BY_DAY int,
	BY_HOUR int,
	BY_WEEK int,
	BY_MONTH int,
	CONSTRAINT RENT_PK PRIMARY KEY (RENT_ID),
	CONSTRAINT RENT_FK FORWIGN KEY(SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);



CREATE TABLE VEHICHLE
(
    LICENSE_NUMBER int,
    VEHICLE_OWNERID int,
    VEHICLE_NAME varchar(255),
    VEHICLE_TYPE varchar(255),
    CONSTRAINT VEHICLE_PK PRIMARY KEY (LICENSE_NUMBER),
    CONSTRAINT VEHICLE_FK FOREIGN KEY(VEHICLE_OWNERID) REFERENCES USERINFO(user_id)
    );


CREATE TABLE OFFER
(
    OFFER_CODE int,
    VALIDITY date,
    DESCRIPTION varchar(255),
    REDUCTION varchar(255),
    CREATED_BY int,
    CONSTRAINT VEHICLE_PK PRIMARY KEY (OFFER_CODE),
    CONSTRAINT VEHICLE_FK FOREIGN KEY(CREATED_BY) REFERENCES Employee(employee_id)
    );
	
CREATE TABLE ACCEPTED_OFFER
(
  ACCEPTED_USER int,
  ACCEPTED_OFFER int,
  DATE_ACCEPTED date,
  CONSTRAINT ACCEPTED_OFFER_PK PRIMARY KEY USERINFO(ACCEPTED_USER,ACCEPTED_OFFER),
  CONSTRAINT ACCEPTED_USER_FK  FOREIGN KEY(ACCEPTED_USER) REFERENCES USERINFO(user_id),
  CONSTRAINT ACCEPTED_OFFER_FK FOREIGN KEY(ACCEPTED_OFFER) REFERENCES OFFER(OFFER_CODE)
  

);


CREATE TABLE PARKING_PLACE
(
    PLACE_ID int,
    OWNER_ID int,
    GPS_LAT DOUBLE,
    GPS_LONG DOUBLE,
    ADRESS varchar(255),
    VERIFIED_BY int,
    CONSTRAINT PLACE_PK PRIMARY KEY (PLACE_ID),
    CONSTRAINT PLACEUSER_FK FOREIGN KEY(OWNER_ID) REFERENCES USERINFO(user_id),
    CONSTRAINT PLACEEMPLOYEE_FK FOREIGN KEY(VERIFIED_BY) REFERENCES Employee(employee_id)
);





CREATE TABLE REVIEW
(
  REVIEW_ID int,
  REV_USER_ID int,
    REV_SPOT_ID int,
   USER_RATING double,
    USER_COMMENT varchar(255),
    
 CONSTRAINT REVIEW_PK PRIMARY KEY (REVIEW_ID),
    CONSTRAINT REVIEW_USER_FK FOREIGN KEY(REV_USER_ID) REFERENCES USERINFO(user_id),
    CONSTRAINT REVIEW_SPOT_FK FOREIGN KEY(REV_SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);



CREATE TABLE p_spots
(
  id int,
  place_id int,
  rent_value int,
  location varchar(255),
  vehicle_type varchar(255),
  availability int,
  user_review int,
  updated_at timestamp,
  created_at timestamp,
  CONSTRAINT 	SPOT_PK PRIMARY KEY (id),
  CONSTRAINT SPOTPLACE_FK FOREIGN KEY(place_id) REFERENCES p_places(id) 
  
);




CREATE TABLE PARKING_INVOICE
(
  INVOICE_ID int,
  VEHICLE_ID int,
    SPOT_ID int,
   END_TIME varchar(255),
    START_TIME varchar(255),
    RENT_TYPE varchar(255),
    RENT_VALUE int,
    
 CONSTRAINT INVOICE_PK PRIMARY KEY (INVOICE_ID),
    CONSTRAINT INVOICE_VEHICLE_FK FOREIGN KEY(VEHICLE_ID) REFERENCES VEHICHLE(LICENSE_NUMBER),
    CONSTRAINT INVOICE_SPOT_FK FOREIGN KEY(SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);

CREATE TABLE USERINFO (
    user_id int,
    Role varchar(255),
    UserPassword varchar(255),
    LastName varchar(255),
    FirstName varchar(255),
    Email varchar(255),
    NID varchar(255),
    Phone int,
    CONSTRAINT USER_PK PRIMARY KEY (user_id)
);


CREATE TABLE Employee (
    employee_id int,
    EmployeePassword varchar(255),
    LastName varchar(255),
    FirstName varchar(255),
    Email varchar(255),
    NID varchar(255),
    Phone int,
    Adress varchar(255),
    Designation varchar(255),
    CONSTRAINT Employee_PK PRIMARY KEY (employee_id)
);



CREATE TABLE RENT
(
  RENT_ID int,
  SPOT_ID int,
  BY_DAY int,
	BY_HOUR int,
	BY_WEEK int,
	BY_MONTH int,
	CONSTRAINT RENT_PK PRIMARY KEY (RENT_ID),
	CONSTRAINT RENT_FK FORWIGN KEY(SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);



CREATE TABLE VEHICHLE
(
    LICENSE_NUMBER int,
    VEHICLE_OWNERID int,
    VEHICLE_NAME varchar(255),
    VEHICLE_TYPE varchar(255),
    CONSTRAINT VEHICLE_PK PRIMARY KEY (LICENSE_NUMBER),
    CONSTRAINT VEHICLE_FK FOREIGN KEY(VEHICLE_OWNERID) REFERENCES USERINFO(user_id)
    );


CREATE TABLE OFFER
(
    OFFER_CODE int,
    VALIDITY date,
    DESCRIPTION varchar(255),
    REDUCTION varchar(255),
    CREATED_BY int,
    CONSTRAINT VEHICLE_PK PRIMARY KEY (OFFER_CODE),
    CONSTRAINT VEHICLE_FK FOREIGN KEY(CREATED_BY) REFERENCES Employee(employee_id)
    );
	
CREATE TABLE ACCEPTED_OFFER
(
  ACCEPTED_USER int,
  ACCEPTED_OFFER int,
  DATE_ACCEPTED date,
  CONSTRAINT ACCEPTED_OFFER_PK PRIMARY KEY USERINFO(ACCEPTED_USER,ACCEPTED_OFFER),
  CONSTRAINT ACCEPTED_USER_FK  FOREIGN KEY(ACCEPTED_USER) REFERENCES USERINFO(user_id),
  CONSTRAINT ACCEPTED_OFFER_FK FOREIGN KEY(ACCEPTED_OFFER) REFERENCES OFFER(OFFER_CODE)
  

);


CREATE TABLE PARKING_PLACE
(
    PLACE_ID int,
    OWNER_ID int,
    GPS_LAT DOUBLE,
    GPS_LONG DOUBLE,
    ADRESS varchar(255),
    VERIFIED_BY int,
    CONSTRAINT PLACE_PK PRIMARY KEY (PLACE_ID),
    CONSTRAINT PLACEUSER_FK FOREIGN KEY(OWNER_ID) REFERENCES USERINFO(user_id),
    CONSTRAINT PLACEEMPLOYEE_FK FOREIGN KEY(VERIFIED_BY) REFERENCES Employee(employee_id)
);





CREATE TABLE REVIEW
(
  REVIEW_ID int,
  REV_USER_ID int,
    REV_SPOT_ID int,
   USER_RATING double,
    USER_COMMENT varchar(255),
    
 CONSTRAINT REVIEW_PK PRIMARY KEY (REVIEW_ID),
    CONSTRAINT REVIEW_USER_FK FOREIGN KEY(REV_USER_ID) REFERENCES USERINFO(user_id),
    CONSTRAINT REVIEW_SPOT_FK FOREIGN KEY(REV_SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);



CREATE TABLE p_spots
(
  id int,
  place_id int,
  rent_value int,
  location varchar(255),
  vehicle_type varchar(255),
  availability int,
  user_review int,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  FOREIGN KEY(place_id) REFERENCES p_places(id) 
);




CREATE TABLE PARKING_INVOICE
(
  INVOICE_ID int,
  VEHICLE_ID int,
    SPOT_ID int,
   END_TIME varchar(255),
    START_TIME varchar(255),
    RENT_TYPE varchar(255),
    RENT_VALUE int,
    
 CONSTRAINT INVOICE_PK PRIMARY KEY (INVOICE_ID),
    CONSTRAINT INVOICE_VEHICLE_FK FOREIGN KEY(VEHICLE_ID) REFERENCES VEHICHLE(LICENSE_NUMBER),
    CONSTRAINT INVOICE_SPOT_FK FOREIGN KEY(SPOT_ID) REFERENCES PARKING_SPOT(SPOT_ID)
);





